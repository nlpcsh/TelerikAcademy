<!DOCTYPE html>
<html>

<head>
    <title>3.Deep copy</title>
    <meta charset="utf-8">
    <link href="styles/js-console.css" rel="stylesheet" />
    <link href="styles/common.css" rel="stylesheet" />
</head>

<body>
    <div id="problem">
        Problem 3. Deep copy - Write a function that makes a deep copy of an object.
        <br/> The function should work for both primitive and reference types.
    </div>
    <br/>
    <div id="js-console"></div>
    <script src="scripts/js-console.js"></script>
    <script>
    var ourGuy = {
            Name: 'Joro',
            Age: 9,
            FriendsAge: [10, 7, 9],
            CostOfToys: {
                car: 110,
                plane: 29,
                boat: 34
            }
        },
        copyOurGuy = copyObj(ourGuy);

    copyOurGuy.Name = 'Mitko';
    copyOurGuy.FriendsAge = [11, 9, 8];
    copyOurGuy.CostOfToys = {
        car: 86,
        plane: 129,
        boat: 54
    };

    jsConsole.writeLine(ourGuy.Name + " friends ages: " + ourGuy.FriendsAge.join(', '));
    jsConsole.writeLine(copyOurGuy.Name + " friends ages: " + copyOurGuy.FriendsAge.join(', '));
    jsConsole.writeLine(ourGuy.Name + "'s toy 'boat' price: " + ourGuy.CostOfToys.boat);
    jsConsole.writeLine(copyOurGuy.Name + "'s toy 'boat' price: " + copyOurGuy.CostOfToys.boat);

    function copyObj(someObj) {
        var result,
        i;

        if (someObj instanceof Array) {
            result = [];
        } else {
            result = {};
        }

        for (i in someObj) {
            if (someObj[i] && typeof someObj[i] == "someObject") {
                result[i] = copyObj(someObj[i]);
            } else {
                result[i] = someObj[i];
            }
        }
        return result;
    }
    </script>
</body>

</html>
